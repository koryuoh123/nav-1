{"version":3,"sources":["main.js"],"names":["$siteList","$","$lastLi","find","x","localStorage","getItem","xObject","JSON","parse","window","hashMap","logo","logoType","url","render","remove","forEach","node","index","ico","$li","simplifyUrl","insertBefore","on","open","e","stopPropagation","splice","prompt","indexOf","newSite","push","onbeforeunload","string","stringify","setItem","replace"],"mappings":"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","file":"main.58b1b628.js","sourceRoot":"..\\src","sourcesContent":["const $siteList = $(\".siteList\");\r\nconst $lastLi = $siteList.find(\"li.last\"); //找出<li class=\"last\">\r\nconst x = localStorage.getItem(\"x\");\r\nconst xObject = JSON.parse(x);\r\nwindow.hashMap = xObject || [\r\n  {\r\n    logo: \"W\",\r\n    logoType: \"text\",\r\n    url: \"https://www.w3.org/\",\r\n  },\r\n];\r\n\r\n/*渲染hashmap*/\r\nconst render = () => {\r\n  $(\".siteList\").find(\"li:not(.last)\").remove();\r\n  hashMap.forEach((node, index) => {\r\n    const $siteList = $(\".siteList\");\r\n    const $lastLi = $siteList.find(\"li.last\"); //找出<li class=\"last\">\r\n    if (node.logoType === \"image\") {\r\n      const ico = node.url + \"/favicon.ico\";\r\n      const $li = $(`<li>\r\n                <div class=\"site\">\r\n                <div class=\"edit\">\r\n                  <svg class=\"icon\" aria-hidden=\"true\">\r\n                    <use xlink:href=\"#icon-choose2\"></use>\r\n                  </svg>\r\n                  </div>\r\n                    <div class=\"logo\">\r\n                    <img class =\"image\" src= ${ico} alt=\"\" />\r\n                    </div>\r\n                    <div class=\"link\">${simplifyUrl(node.url)}</div>\r\n                </div> \r\n            </li>`).insertBefore($lastLi);\r\n      /*跳转功能 */\r\n      $li.on(\"click\", () => {\r\n        window.open(node.url);\r\n      });\r\n      /*删除功能*/\r\n      $li.on(\"click\", \".edit\", (e) => {\r\n        e.stopPropagation();\r\n\r\n        hashMap.splice(index, 1);\r\n        render();\r\n      });\r\n    }\r\n\r\n    /* ↓↓备用方案↓↓*/\r\n    if (node.logoType === \"text\") {\r\n      const $li = $(`<li>\r\n                  <div class=\"site\">\r\n                  <div class=\"close\">\r\n                  <svg class=\"icon\" aria-hidden=\"true\">\r\n                    <use xlink:href=\"#icon-choose2\"></use>\r\n                  </svg>\r\n                  </div>\r\n                      <div class=\"logo\">${simplifyUrl(\r\n                        simplifyUrl(node.url)[0]\r\n                      )}</div>\r\n                      <div class=\"link\">${simplifyUrl(node.url)}</div>\r\n                  </div> \r\n              </li>`).insertBefore($lastLi);\r\n      /*跳转功能 */\r\n      $li.on(\"click\", () => {\r\n        window.open(node.url);\r\n      });\r\n      /*删除功能*/\r\n      $li.on(\"click\", \".close\", (e) => {\r\n        e.stopPropagation();\r\n        hashMap.splice(index, 1);\r\n        render();\r\n      });\r\n    }\r\n  });\r\n};\r\n\r\n/*添加功能 */\r\n$(\".addButton\").on(\"click\", () => {\r\n  let url = window.prompt(\"输入要添加的网址\");\r\n  if (url.indexOf(\"http\") !== 0) {\r\n    url = \"http://\" + url;\r\n  }\r\n  const newSite = { logo: url[0], logoType: \"image\", url: url };\r\n  hashMap.push(newSite);\r\n  render();\r\n});\r\n\r\n/*如果页面被关闭了，就将数据保存到 localStorage 里*/\r\nwindow.onbeforeunload = () => {\r\n  const string = JSON.stringify(hashMap);\r\n  localStorage.setItem(\"x\", string); //key,value\r\n};\r\n\r\n/*简化link */\r\nconst simplifyUrl = (url) => {\r\n  return url\r\n    .replace(\"https://\", \"\")\r\n    .replace(\"http://\", \"\")\r\n    .replace(\"www.\", \"\")\r\n    .replace(/\\/,*/, \"\"); //正则表达式，删除 / 开头的内容\r\n};\r\n\r\n/*main */\r\nrender();\r\n"]}